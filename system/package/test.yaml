name: Azure Pipeline Agent VM Set
shortName: azAgent
version: 1.0.0
ingredients:
  - "@azbake/ingredient-availability-set@~0"
  - "@azbake/ingredient-network-interface@~0"
  - "@azbake/ingredient-azure-vm@~0"
resourceGroup: true
rgOverride: "test-rg"
parallelRegions: false
recipe:
  availset:
    properties:
      type: "@azbake/ingredient-availability-set"      
      parameters:
        name: "az-pl-availset001"
        faultDomains: "1"
        updateDomains: "1"
        sku: "Aligned"
  nic001:
    properties:
      type: "@azbake/ingredient-network-interface"      
      parameters:
        networkInterfaceName: "az-pl-nic001"
        virtualNetworkName: "testVNET_1"        
        subnetName: "default"
  nic002:
    properties:
      type: "@azbake/ingredient-network-interface"      
      parameters:
        networkInterfaceName: "az-pl-nic002"
        virtualNetworkName: "testVNET_1"        
        subnetName: "default"
  agentvm001:
    properties:
      type: "@azbake/ingredient-azure-vm"      
      parameters:
        vmName: "az-pl-agent-001"
        adminUsername: "pluser"
        adminKey: 'AAAAB3NzaC1yc2EAAAABJQAAAQEAhFNeqNpkPxrxROl6AUxhrwA+0aGV49khDVqvGQxz4crtz9/GbphTlSAfv1DxJnss9/o1mqzUnqjxhd9iy/WsKhdNxKOW0IteJIawax4CxcmKDSUX9Xh+nXtt7zeX1Bw8HcGoc5lweVDfg/jfnKFALuyUKyrsuloPviwbxO+zCxqYVhEnfTF+sS1WKGu+iIPCdvOIFdCZcf21HW5C6t3j0Dk+MqoXIR9YOLtLUjX9LZdUUQUjqsINhLwyzlWAf3lG0AIm/N38yTenJXqavEZe4XQWb3FAHpwO/FknzAYnq/hZR/n92Eot3sqYkyCjABsYlOYCqZ25PyKeBSX7WjVmew=='
        subnetName: "default"
        nicName: "az-pl-nic001"
        virtualNetworkName: "testVNET_1"        
        vmSize: "Standard_D2s_v3"
        imageName: "az-pipeline-image.v1" 
        osType: "linux"  
        storageAccountName: "adhivm"
        availabilitySetName: "az-pl-availset001"     
  agentvm002:
    properties:
      type: "@azbake/ingredient-azure-vm"      
      parameters:
        vmName: "az-pl-agent-002"
        adminUsername: "pluser"
        adminKey: 'AAAAB3NzaC1yc2EAAAABJQAAAQEAhFNeqNpkPxrxROl6AUxhrwA+0aGV49khDVqvGQxz4crtz9/GbphTlSAfv1DxJnss9/o1mqzUnqjxhd9iy/WsKhdNxKOW0IteJIawax4CxcmKDSUX9Xh+nXtt7zeX1Bw8HcGoc5lweVDfg/jfnKFALuyUKyrsuloPviwbxO+zCxqYVhEnfTF+sS1WKGu+iIPCdvOIFdCZcf21HW5C6t3j0Dk+MqoXIR9YOLtLUjX9LZdUUQUjqsINhLwyzlWAf3lG0AIm/N38yTenJXqavEZe4XQWb3FAHpwO/FknzAYnq/hZR/n92Eot3sqYkyCjABsYlOYCqZ25PyKeBSX7WjVmew=='
        subnetName: "default"
        nicName: "az-pl-nic002"
        virtualNetworkName: "testVNET_1"        
        vmSize: "Standard_D2s_v3"
        imageName: "az-pipeline-image.v1"    
        osType: "linux"
        storageAccountName: "adhivm"
        availabilitySetName: "az-pl-availset001"     
  